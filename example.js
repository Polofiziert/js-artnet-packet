const {AT_OPCODES, AT_REPORT_CODES, AT_STYLE_CODES, AT_OEM_CODES} = require('./lib/codes');
const {ArtNetConstants} = require("./lib/constants");
const {ArtNetMinPacket, ArtNetPacket} = require("./lib/packets/packets");
const {ArtPollPacket, ArtPollReplyPacket} = require("./lib/packets/index");



var artMinPack1 = new ArtNetMinPacket(AT_OPCODES[0].code);
console.log(artMinPack1)

const buf = Buffer.alloc(10)
var offset = artMinPack1.writeMinHeader(buf)
console.log(buf)
console.log(offset)
console.log("-------------")

var artMinPack2 = new ArtNetMinPacket(AT_OPCODES[0].code);
console.log(artMinPack2)

const bufOpDmxMin = Buffer.from([0x41, 0x72, 0x74, 0x2d, 0x4e, 0x65, 0x74, 0x00, 0x00, 0x50])
console.log(bufOpDmxMin)
artMinPack2.readMinHeader(bufOpDmxMin)
console.log(artMinPack2)
console.log(bufOpDmxMin)

console.log("-------------")

var artPack = new ArtNetPacket(AT_OPCODES[0].code);
const bufOpDmx = Buffer.from([0x41, 0x72, 0x74, 0x2d, 0x4e, 0x65, 0x74, 0x00, 0x00, 0x50, 0x00, 0x0e])
const bufArtPack = Buffer.alloc(12)
var offset3 = artPack.writeHeader(bufArtPack)

console.log(artPack)
console.log(bufArtPack)
console.log(bufOpDmx)
console.log(bufOpDmx.length)
console.log("___---___")

var offset1 = artPack.readHeader(bufOpDmx)
offset3 = artPack.writeHeader(bufArtPack)

console.log(artPack)
console.log(bufArtPack)
console.log(bufOpDmx)
console.log(offset1)

console.log("-------------")

var artPoll = new ArtPollPacket()
console.log(artPoll)

var bufExp = Buffer.from([0x41, 0x72, 0x74, 0x2d, 0x4e, 0x65, 0x74, 0x00, 0x00, 0x20, 0x00, 0x0e, 0x06, 0x00, 0x7f, 0xff, 0x00, 0x00, 0x53, 0x79, 0x22, 0x69])
var artPollBuf = artPoll.toBuffer()
console.log(artPollBuf)
console.log(bufExp)

console.log(AT_OPCODES.find(code => code.name === "OpPoll"))

console.log("-------------")

var artPollReply = new ArtPollReplyPacket()
console.log(artPollReply)

var bufExpected = Buffer.from([0x41, 0x72, 0x74, 0x2d, 0x4e, 0x65, 0x74, 0x00, 0x00, 0x21, 0xc0, 0xa8, 0x01, 0x66, 0x36, 0x19, 0x04, 0x30, 0x00, 0x00, 0x22, 0x69, 0x00, 0x00, 0x79, 0x53, 0x44, 0x4d, 0x58, 0x2d, 0x57, 0x6f, 0x72, 0x6b, 0x73, 0x68, 0x6f, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x44, 0x4d, 0x58, 0x2d, 0x57, 0x6f, 0x72, 0x6b, 0x73, 0x68, 0x6f, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x23, 0x30, 0x30, 0x30, 0x31, 0x20, 0x5b, 0x30, 0x30, 0x30, 0x31, 0x5d, 0x20, 0x50, 0x6f, 0x77, 0x65, 0x72, 0x20, 0x4f, 0x6e, 0x20, 0x54, 0x65, 0x73, 0x74, 0x73, 0x20, 0x50, 0x61, 0x73, 0x73, 0x2e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x4c, 0x6a, 0x3c, 0xab, 0xc0, 0xa8, 0x01, 0x66, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
console.log(bufExpected)
console.log(bufExpected.length)
process.stdout.write(JSON.stringify(bufExpected) + "\n")

var artPollReplyBuf = artPollReply.toBuffer()
console.log(artPollReplyBuf)
console.log(artPollReplyBuf.length)
process.stdout.write(JSON.stringify(artPollReplyBuf) + "\n")


/*
var artPack2 = new ArtNetPacket(AT_OPCODES[3].code);
console.log(artPack2)
*/


